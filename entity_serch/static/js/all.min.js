function tN(){const n=document.getElementById('navbar');n&&n.classList.toggle('active')}function uL(){const l=document.getElementById('current_dataset_link'),o=document.querySelectorAll('#dataset-select option:checked');if(l){if(o.length){const v=o[o.length-1].value;l.href=`/current/${v}`,l.textContent=`Current (${v})`}else l.href='/current/',l.textContent='Current'}}const socket=io(),f=document.getElementById('predict-form');f&&(f.onsubmit=function(e){e.preventDefault();const t=document.getElementById('confidenceThreshold').value/100,n=document.getElementById('precisionRecall').value/100,i=document.getElementById('checkbox1')?.checked,s=document.getElementById('checkbox2')?.checked,a=Array.from(document.getElementById('dataset-select').selectedOptions).map(o=>o.value),r=this.text.value;socket.emit('predict',{dataset:a,text:r,threshold:t,fullness:n,istext:i,isdescription:s})},socket.on('clean',()=>{console.log('cleaning of data'),document.getElementById('result').innerHTML=''}),socket.on('data_ready',d=>{console.log('Received data:',d),dR(d)}),function dR(d){const r=document.getElementById('result');if(r){r.innerHTML+=`<div class="pred-div"><div class="prefix"><span style="font-size: 16px; color: #fff5aa;"> ${d.amount}</span><span style="color: #f6ffd5;"> entity was found in: &nbsp;</span><span style="font-size: 18px;">${d.dataset_name}</span></div><div class='tab_of_predicts'><table class="transparent-table"><thead><tr><th>ID</th><th>Shure</th><th>Name</th></tr></thead><tbody>${d.prediction.id.map((id,i)=>`<tr><td>${id}</td><td>${d.prediction.shure[i]}</td><td>${d.prediction.name[i]}</td></tr>`).join('')}</tbody></table></div></div>`}});const cS=document.getElementById('confidenceThreshold'),pS=document.getElementById('precisionRecall'),cVD=document.getElementById('confidenceValue'),pVD=document.getElementById('precisionValue');if(cS&&cVD){const uCV=()=>{cVD.textContent=(cS.value/100).toFixed(2)};cS.addEventListener('input',uCV),uCV()}if(pS&&pVD){const uPV=()=>{pVD.textContent=(pS.value/100).toFixed(2)};pS.addEventListener('input',uPV),uPV()}document.querySelectorAll('.whatitis').forEach(icon=>icon.addEventListener('click',()=>{const info=icon.nextElementSibling;info&&(info.style.display=info.style.display==="block"?"none":"block")}));const cF=document.getElementById('csv-file');cF&&cF.addEventListener('change',e=>e.preventDefault());const dS=document.querySelectorAll('.dropdown');dS.forEach(d=>{const b=d.querySelector('.setting_button'),c=d.querySelector('.dropdown-content');b&&b.addEventListener('click',e=>{d.classList.toggle('show'),e.stopPropagation()}),document.addEventListener('click',()=>{d.classList.remove('show')}),c&&(c.addEventListener('click',e=>e.stopPropagation()),d.querySelector('.btn-ok')?.addEventListener('click',()=>{d.classList.remove('show')}))});function tII(){const c=document.getElementById("isid_checkbox"),w=document.getElementById("idInputWrapper"),n=document.getElementById("name_p"),d=document.getElementById("description_p");if(c&&w){if(c.checked){w.style.display="block",n.value=1,n.placeholder="e.g. 1",d.value=2,d.placeholder="e.g. 2"}else{w.style.display="none",n.value=0,n.placeholder="e.g. 0",d.value=1,d.placeholder="e.g. 1"}}}document.addEventListener('DOMContentLoaded',()=>{const eM=document.querySelectorAll('.edit-menu'),hI=document.getElementById('hidden-id'),wI=document.getElementById('word'),dT=document.getElementById('description');eM.forEach(m=>{m.addEventListener('click',function(){if(hI&&wI&&dT){hI.value=this.getAttribute('data-entityid'),wI.value=this.getAttribute('data-entityname'),dT.value=this.getAttribute('data-description')}})})});function vWI(i){const r=/^[a-zA-Zа-яА-ЯёЁ0-9]+$/;r.test(i.value)?i.classList.add('valid'):i.classList.remove('valid')}function tCA(c){c.querySelector('input[type="text"]:focus')||c.querySelector('textarea:focus')?c.classList.add('active'):c.classList.remove('active')}
